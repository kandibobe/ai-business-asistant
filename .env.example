# ==============================================================================
# AI Business Intelligence Agent - Configuration File
# ==============================================================================
#
# ВАЖНО: Скопируйте этот файл в .env и заполните своими реальными значениями!
# Команда: cp .env.example .env
#
# НЕ КОММИТЬТЕ .env файл в Git! Он должен быть в .gitignore
# ==============================================================================

# --- Telegram Bot Configuration ---
# Получите токен у @BotFather в Telegram
# Пример: 1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here

# --- Google Gemini AI Configuration ---
# Получите API ключ на: https://makersuite.google.com/app/apikey
# Пример: AIzaSyABCDEFGHIJKLMNOPQRSTUVWXYZ123456
GEMINI_API_KEY=your_gemini_api_key_here

# --- OpenAI Configuration (для транскрибации аудио через Whisper) ---
# Получите API ключ на: https://platform.openai.com/api-keys
# Пример: sk-proj-ABCDEFGHIJKLMNOPQRSTUVWXYZ123456
# ОПЦИОНАЛЬНО: Если не указан, транскрибация будет работать в демо-режиме
OPENAI_API_KEY=your_openai_api_key_here

# --- PostgreSQL Database Configuration ---
# Хост базы данных (localhost если используете Docker Compose)
DB_HOST=localhost

# Порт PostgreSQL (по умолчанию 5432)
DB_PORT=5432

# Имя пользователя PostgreSQL
DB_USER=ai_bot_user

# Пароль пользователя PostgreSQL (ИСПОЛЬЗУЙТЕ НАДЕЖНЫЙ ПАРОЛЬ!)
DB_PASS=your_strong_password_here

# Имя базы данных
DB_NAME=ai_bot_db

# --- Redis Configuration ---
# URL подключения к Redis (для Celery, rate limiting, и AI caching)
# Формат: redis://host:port/db_number
# Если используете Docker Compose, оставьте как есть
REDIS_URL=redis://localhost:6379/0

# --- AI Response Caching ---
# Time-to-live для кэша AI ответов (в секундах)
# По умолчанию: 3600 (1 час)
# Кэширование снижает затраты на API и ускоряет ответы
AI_CACHE_TTL=3600

# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================

# --- Log Level ---
# Уровень логирования: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Production: INFO или WARNING
# Development: DEBUG
LOG_LEVEL=INFO

# --- Log File ---
# Путь к файлу логов (опционально)
# Если не указан, логи выводятся только в консоль
# LOG_FILE=/var/log/ai-bot/app.log

# --- JSON Logs ---
# Использовать JSON формат для логов (для production и log aggregators)
# false = человекочитаемый формат с цветами
# true = JSON формат
JSON_LOGS=false

# ==============================================================================
# REST API CONFIGURATION
# ==============================================================================

# --- API Server ---
# Порт для FastAPI сервера
API_PORT=8000

# JWT секретный ключ (ОБЯЗАТЕЛЬНО ИЗМЕНИТЕ В PRODUCTION!)
# Сгенерируйте: openssl rand -hex 32
# ВАЖНО: Минимум 32 символа!
JWT_SECRET_KEY=change-this-to-a-real-secret-key-min-32-characters-long-please

# --- CORS ---
# Разрешенные origins для CORS (через запятую)
# В development: http://localhost:5173,http://localhost:3000
# В production: https://yourdomain.com
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# ==============================================================================
# БЕЗОПАСНОСТЬ
# ==============================================================================

# --- Rate Limiting ---
# Защита от спама и злоупотреблений
# Лимиты применяются автоматически на основе tier пользователя (free/premium)
# Настройки находятся в middleware/rate_limiter.py

# --- File Upload Security ---
# Все загруженные файлы проверяются на:
# - Валидность расширения
# - Размер файла (лимиты в utils/security.py)
# - MIME-type через magic bytes
# - Path traversal атаки

# --- Input Sanitization ---
# Все пользовательские вводы проверяются на:
# - SQL injection паттерны
# - Command injection попытки
# - XSS атаки
# - Длину (max 5000 символов для AI запросов)

# --- Monitoring & Logging ---
# (Опционально) Интеграция с Sentry для error tracking
# SENTRY_DSN=your_sentry_dsn_here

# --- API Keys Storage ---
# ⚠️ ВАЖНО: Никогда не коммитьте .env в Git!
# ⚠️ Используйте сильные пароли для DB_PASS
# ⚠️ Регулярно ротируйте API ключи
# ⚠️ В production используйте секреты менеджеры (AWS Secrets Manager, HashiCorp Vault)

# ==============================================================================
# ИНСТРУКЦИЯ ПО РАЗВЕРТЫВАНИЮ:
# ==============================================================================
#
# 1. Скопируйте этот файл:
#    cp .env.example .env
#
# 2. Заполните все значения в .env файле
#
# 3. Запустите инфраструктуру:
#    docker-compose up -d
#
# 4. Установите зависимости Python:
#    pip install -r requirements.txt
#
# 5. Запустите Celery Worker (в отдельном терминале):
#    celery -A celery_app worker --loglevel=info
#
# 6. Запустите бота:
#    python main.py
#
# ==============================================================================
