# ==============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ==============================================================================
#
# This file contains production-specific settings.
# Used for production deployment.
#
# CRITICAL: All sensitive values must be stored in secure secret managers:
# - Google Secret Manager
# - AWS Secrets Manager
# - HashiCorp Vault
# - Kubernetes Secrets
#
# To use: export ENVIRONMENT=production
# ==============================================================================

# --- Environment ---
ENVIRONMENT=production

# --- Telegram Bot Configuration ---
# CRITICAL: Use production bot token from secret manager
TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN_SECRET}

# --- AI Configuration ---
# CRITICAL: Use production API keys from secret manager
GEMINI_API_KEY=${GEMINI_API_KEY_SECRET}
OPENAI_API_KEY=${OPENAI_API_KEY_SECRET}

# Production models (more capable)
GEMINI_MODEL_NAME=gemini-1.5-pro-002
GEMINI_FLASH_MODEL=gemini-1.5-flash-002

# --- Database Configuration ---
# Production database (use managed service: Cloud SQL, RDS, etc.)
DB_HOST=${DB_HOST_SECRET}
DB_PORT=5432
DB_USER=${DB_USER_SECRET}
DB_PASS=${DB_PASS_SECRET}
DB_NAME=ai_bot_production

# Connection pooling for production
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# --- Redis Configuration ---
# Production Redis (use managed service: Cloud Memorystore, ElastiCache, etc.)
REDIS_URL=${REDIS_URL_SECRET}

# Longer cache TTL for production
AI_CACHE_TTL=3600

# --- Logging Configuration ---
LOG_LEVEL=INFO
LOG_FILE=/var/log/ai-bot/production.log
JSON_LOGS=true

# Log rotation
LOG_RETENTION_DAYS=30
LOG_MAX_SIZE_MB=100

# --- API Configuration ---
API_PORT=8080

# CRITICAL: Strong JWT secret from secret manager
JWT_SECRET_KEY=${JWT_SECRET_KEY_SECRET}
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# --- CORS ---
# CRITICAL: Only allow your production domains
ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com

# --- Security Configuration ---
# Strict limits for production
MAX_FILE_SIZE_MB=50
RATE_LIMIT_PER_MINUTE=30
RATE_LIMIT_PER_MINUTE_PREMIUM=100

# --- Feature Flags ---
ENABLE_AUDIO_TRANSCRIPTION=true
ENABLE_WEB_SCRAPING=true
ENABLE_AI_CACHING=true
ENABLE_METRICS=true

# --- Monitoring ---
# CRITICAL: Enable Sentry for error tracking
SENTRY_DSN=${SENTRY_DSN_SECRET}

# --- Performance Tuning ---
# Production worker settings
CELERY_WORKER_CONCURRENCY=8
CELERY_TASK_TIME_LIMIT=300
MAX_CONTEXT_LENGTH=100000

# --- Production Specific ---
# Disable debug features
DEBUG_SQL_QUERIES=false
DEBUG_LOG_REQUESTS=false
DEBUG_SLOW_QUERY_THRESHOLD=1.0

# No hot reload in production
RELOAD=false

# Always verify SSL in production
VERIFY_SSL=true

# --- Health Checks ---
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30

# --- Backup & Recovery ---
# Database backup settings (handled by managed service)
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30

# --- Scaling ---
# Auto-scaling settings (for Kubernetes/Cloud Run)
MIN_INSTANCES=2
MAX_INSTANCES=10
TARGET_CPU_UTILIZATION=70

# --- Network ---
# Production networking
INTERNAL_NETWORK=true
USE_CDN=true

# ==============================================================================
# DEPLOYMENT CHECKLIST
# ==============================================================================
#
# Before deploying to production, ensure:
#
# ✅ All secrets are stored in secret manager
# ✅ SSL/TLS certificates are configured
# ✅ Database backups are enabled
# ✅ Monitoring and alerting are set up
# ✅ Rate limiting is properly configured
# ✅ CORS origins are restricted
# ✅ Log aggregation is configured (ELK, CloudWatch, etc.)
# ✅ Health checks are working
# ✅ CI/CD pipeline tests pass
# ✅ Security scanning is clean
# ✅ Load testing is complete
# ✅ Disaster recovery plan is in place
#
# ==============================================================================
