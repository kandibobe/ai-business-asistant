# üéØ –¢–û–ü-10 –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –£–õ–£–ß–®–ï–ù–ò–ô

> **–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
> **–î–∞—Ç–∞:** 2025-11-09
> **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π

---

## üìä –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Telegram –±–æ—Ç —Å –±–∞–∑–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (PDF, Excel, Word, Audio, URL)
- AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Gemini
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL + SQLAlchemy
- Celery –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- React –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (UI –≥–æ—Ç–æ–≤ –Ω–∞ 50%)
- –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å (RU/EN/DE)
- 15 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- **–ù–ï–¢ –¢–ï–°–¢–û–í** - –Ω–∏ –æ–¥–Ω–æ–≥–æ unit/integration —Ç–µ—Å—Ç–∞
- **–ù–ï–¢ API** - –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –±—ç–∫–µ–Ω–¥—É
- **–ù–ï–¢ –í–ê–õ–ò–î–ê–¶–ò–ò** - –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
- **–ù–ï–¢ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò** - SQL injection, XSS, file upload —É—è–∑–≤–∏–º–æ—Å—Ç–∏
- **–°–õ–ê–ë–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö** - –±–∞–∑–æ–≤–∞—è, –±–µ–∑ retry –ª–æ–≥–∏–∫–∏
- **–ù–ï–¢ –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê** - –Ω–µ—Ç –º–µ—Ç—Ä–∏–∫ –∏ health checks
- **–ù–ï–¢ RATE LIMITING** - –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–ù–ï–¢ –ö–≠–®–ò–†–û–í–ê–ù–ò–Ø** - AI –∑–∞–ø—Ä–æ—Å—ã –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è (–¥–æ—Ä–æ–≥–æ)
- **–ó–ê–ì–õ–£–®–ö–ò –í –í–ï–ë-–ü–†–ò–õ–û–ñ–ï–ù–ò–ò** - —á–∞—Ç, –∑–∞–≥—Ä—É–∑–∫–∞, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- **–ù–ï–¢ CI/CD** - —Ä—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π, –Ω–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

---

## üéØ –¢–û–ü-10 –ñ–ò–ó–ù–ï–ù–ù–û –ù–ï–û–ë–•–û–î–ò–ú–´–• –£–õ–£–ß–®–ï–ù–ò–ô

### 1Ô∏è‚É£ **–°–ò–°–¢–ï–ú–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò –ò –í–ê–õ–ò–î–ê–¶–ò–ò** üîí
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
**–í—Ä–µ–º—è:** 3 –¥–Ω—è
**–†–∏—Å–∫ –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –í–∑–ª–æ–º, –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö, —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ—Ç–µ—Ä–∏

#### –ü—Ä–æ–±–ª–µ–º—ã
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–∞/—Ä–∞–∑–º–µ—Ä–∞
- SQL-–∏–Ω—ä–µ–∫—Ü–∏–∏ –≤–æ–∑–º–æ–∂–Ω—ã —á–µ—Ä–µ–∑ user input
- XSS —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –ù–µ—Ç rate limiting - –º–æ–∂–Ω–æ –∑–∞—Å–ø–∞–º–∏—Ç—å –±–æ—Ç–∞
- API –∫–ª—é—á–∏ –º–æ–≥—É—Ç —É—Ç–µ—á—å —á–µ—Ä–µ–∑ –ª–æ–≥–∏

#### –†–µ—à–µ–Ω–∏–µ
```python
# –°–æ–∑–¥–∞—Ç—å utils/security.py
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (—Ç–∏–ø, —Ä–∞–∑–º–µ—Ä, MIME-type, magic bytes)
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
- Rate limiting (5 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É –¥–ª—è AI, 10/–º–∏–Ω—É—Ç—É –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏)
- Input validation —Å Pydantic
- Secrets management (–Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –∫–ª—é—á–∏ –≤ –∫–æ–¥–µ)
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è API
- CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

#### –§–∞–π–ª—ã
- `utils/security.py` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è
- `utils/validators.py` - Pydantic —Å—Ö–µ–º—ã
- `middleware/rate_limiter.py` - rate limiting
- `middleware/auth.py` - JWT –ø—Ä–æ–≤–µ—Ä–∫–∞
- `.env.example` - –æ–±–Ω–æ–≤–∏—Ç—å —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

#### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
- ‚úÖ Rate limiting –Ω–∞ –≤—Å–µ—Ö endpoints
- ‚úÖ Input validation –ø–æ–∫—Ä—ã—Ç –Ω–∞ 100%
- ‚úÖ Security headers –≤ –æ—Ç–≤–µ—Ç–∞—Ö API

---

### 2Ô∏è‚É£ **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï (UNIT + INTEGRATION)** üß™
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
**–í—Ä–µ–º—è:** 5 –¥–Ω–µ–π
**–†–∏—Å–∫ –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –†–µ–≥—Ä–µ—Å—Å–∏–∏, –±–∞–≥–∏ –≤ production, –ø–æ—Ç–µ—Ä—è –¥–æ–≤–µ—Ä–∏—è

#### –ü—Ä–æ–±–ª–µ–º—ã
- **0 —Ç–µ—Å—Ç–æ–≤** –≤ –ø—Ä–æ–µ–∫—Ç–µ
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–º–∞—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –±–µ–∑ —Å—Ç—Ä–∞—Ö–∞
- Code coverage = 0%

#### –†–µ—à–µ–Ω–∏–µ
```python
# –°–æ–∑–¥–∞—Ç—å tests/ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
tests/
‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îú‚îÄ‚îÄ test_models.py           # –¢–µ—Å—Ç—ã –º–æ–¥–µ–ª–µ–π –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ test_crud.py              # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ test_tasks.py             # Celery –∑–∞–¥–∞—á–∏ (mock)
‚îÇ   ‚îú‚îÄ‚îÄ test_security.py          # –í–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ test_utils.py             # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îú‚îÄ‚îÄ test_handlers.py          # Telegram handlers
‚îÇ   ‚îú‚îÄ‚îÄ test_api.py               # REST API endpoints
‚îÇ   ‚îî‚îÄ‚îÄ test_document_flow.py    # End-to-end –∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ fixtures/
‚îÇ   ‚îú‚îÄ‚îÄ sample.pdf
‚îÇ   ‚îú‚îÄ‚îÄ sample.xlsx
‚îÇ   ‚îî‚îÄ‚îÄ sample.docx
‚îú‚îÄ‚îÄ conftest.py                   # Pytest fixtures
‚îî‚îÄ‚îÄ pytest.ini                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```

#### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
1. **–ú–æ–¥–µ–ª–∏ (10 —Ç–µ—Å—Ç–æ–≤)**
   - User —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
   - Document CRUD
   - Relationships

2. **Tasks (15 —Ç–µ—Å—Ç–æ–≤)**
   - PDF –æ–±—Ä–∞–±–æ—Ç–∫–∞
   - Excel –ø–∞—Ä—Å–∏–Ω–≥
   - Word –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ
   - Audio —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è
   - URL scraping

3. **Handlers (20 —Ç–µ—Å—Ç–æ–≤)**
   - /start, /mydocs, /clear
   - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
   - –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - Inline –∫–Ω–æ–ø–∫–∏

4. **API (25 —Ç–µ—Å—Ç–æ–≤)** - –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
   - Auth (login, register, refresh)
   - Documents (CRUD)
   - Chat endpoints
   - Settings

#### –ö–æ–º–∞–Ω–¥—ã
```bash
pip install pytest pytest-cov pytest-asyncio pytest-mock faker
pytest --cov=. --cov-report=html
pytest --cov=. --cov-report=term-missing
```

#### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- ‚úÖ Code coverage > 70%
- ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã
- ‚úÖ CI/CD pipeline –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã
- ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç < 30 —Å–µ–∫—É–Ω–¥

---

### 3Ô∏è‚É£ **REST API –î–õ–Ø –í–ï–ë-–ü–†–ò–õ–û–ñ–ï–ù–ò–Ø** üåê
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
**–í—Ä–µ–º—è:** 4 –¥–Ω—è
**–†–∏—Å–∫ –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, $0 –ø—Ä–æ–¥–∞–∂

#### –ü—Ä–æ–±–ª–µ–º—ã
- –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ React –≥–æ—Ç–æ–≤–æ, –Ω–æ –Ω–µ—Ç backend API
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ - –∑–∞–≥–ª—É—à–∫–∏ (setTimeout)
- –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

#### –†–µ—à–µ–Ω–∏–µ
–°–æ–∑–¥–∞—Ç—å FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å REST endpoints:

```python
# api/main.py
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI(title="AI Business Assistant API")

# Endpoints
```

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API
```
api/
‚îú‚îÄ‚îÄ main.py                    # FastAPI app
‚îú‚îÄ‚îÄ dependencies.py            # Auth, DB dependencies
‚îú‚îÄ‚îÄ models/                    # Pydantic schemas
‚îÇ   ‚îú‚îÄ‚îÄ auth.py
‚îÇ   ‚îú‚îÄ‚îÄ documents.py
‚îÇ   ‚îú‚îÄ‚îÄ chat.py
‚îÇ   ‚îî‚îÄ‚îÄ settings.py
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ auth.py                # POST /auth/login, /auth/register
‚îÇ   ‚îú‚îÄ‚îÄ documents.py           # GET/POST/DELETE /documents
‚îÇ   ‚îú‚îÄ‚îÄ chat.py                # POST /chat/message, GET /chat/history
‚îÇ   ‚îú‚îÄ‚îÄ analytics.py           # GET /analytics/stats
‚îÇ   ‚îú‚îÄ‚îÄ settings.py            # GET/PUT /settings
‚îÇ   ‚îî‚îÄ‚îÄ tools.py               # POST /tools/* (15 developer tools)
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ auth.py                # JWT validation
‚îÇ   ‚îú‚îÄ‚îÄ rate_limiter.py        # Rate limiting
‚îÇ   ‚îî‚îÄ‚îÄ error_handler.py       # Global error handler
‚îî‚îÄ‚îÄ websocket/
    ‚îî‚îÄ‚îÄ chat.py                # WebSocket –¥–ª—è real-time chat
```

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ endpoints

**Authentication**
- `POST /api/auth/register` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/login` - –ª–æ–≥–∏–Ω (JWT token)
- `POST /api/auth/refresh` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- `GET /api/auth/me` - —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

**Documents**
- `GET /api/documents` - —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `POST /api/documents/upload` - –∑–∞–≥—Ä—É–∑–∫–∞ (multipart/form-data)
- `GET /api/documents/{id}` - –¥–µ—Ç–∞–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `DELETE /api/documents/{id}` - —É–¥–∞–ª–µ–Ω–∏–µ
- `PUT /api/documents/{id}/activate` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–º

**Chat**
- `POST /api/chat/message` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å AI
- `GET /api/chat/history/{doc_id}` - –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞
- `WebSocket /ws/chat` - real-time —á–∞—Ç

**Analytics**
- `GET /api/analytics/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /api/analytics/documents/{id}` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞

**Settings**
- `GET /api/settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PUT /api/settings` - –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **FastAPI** - async REST API
- **python-jose** - JWT tokens
- **passlib** - password hashing
- **python-multipart** - file uploads
- **uvicorn** - ASGI server

#### –ó–∞–ø—É—Å–∫
```bash
pip install fastapi uvicorn python-jose passlib python-multipart
uvicorn api.main:app --reload --port 8000
```

#### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- ‚úÖ –í—Å–µ endpoints –∏–∑ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ WebSocket chat —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ File upload –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Celery
- ‚úÖ Response time < 200ms (–±–µ–∑ AI)

---

### 4Ô∏è‚É£ **–ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –í–ï–ë–ê –° API** ‚ö°
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
**–í—Ä–µ–º—è:** 2 –¥–Ω—è
**–†–∏—Å–∫ –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è –¥–µ–º–æ

#### –ü—Ä–æ–±–ª–µ–º—ã
–ò–∑ –∞–Ω–∞–ª–∏–∑–∞ React app (web-app/):
- `ChatPage.tsx:51` - "TODO: Implement actual API call"
- `DocumentsPage.tsx:40` - "TODO: Implement upload logic"
- `SettingsPage.tsx:49` - "TODO: Implement actual API call"
- –í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `setTimeout()` –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

#### –†–µ—à–µ–Ω–∏–µ

**1. –£–±—Ä–∞—Ç—å –≤—Å–µ setTimeout –∑–∞–≥–ª—É—à–∫–∏**
```typescript
// ‚ùå –£–î–ê–õ–ò–¢–¨
setTimeout(() => {
  dispatch(addMessage({ role: 'assistant', content: 'Mock response' }));
}, 1000);

// ‚úÖ –ó–ê–ú–ï–ù–ò–¢–¨ –ù–ê
const response = await apiClient.post('/chat/message', { message, documentId });
dispatch(addMessage(response.data));
```

**2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API –≤—ã–∑–æ–≤—ã**

`web-app/src/api/services/chatService.ts`
```typescript
export const chatService = {
  sendMessage: async (message: string, documentId?: number) => {
    const response = await apiClient.post('/chat/message', {
      message,
      document_id: documentId
    });
    return response.data;
  },

  getHistory: async (documentId: number) => {
    const response = await apiClient.get(`/chat/history/${documentId}`);
    return response.data;
  }
};
```

`web-app/src/api/services/documentService.ts`
```typescript
export const documentService = {
  upload: async (file: File, onProgress?: (progress: number) => void) => {
    const formData = new FormData();
    formData.append('file', file);

    const response = await apiClient.post('/documents/upload', formData, {
      headers: { 'Content-Type': 'multipart/form-data' },
      onUploadProgress: (e) => {
        if (e.total && onProgress) {
          onProgress((e.loaded / e.total) * 100);
        }
      }
    });
    return response.data;
  },

  list: async () => apiClient.get('/documents'),
  delete: async (id: number) => apiClient.delete(`/documents/${id}`),
  activate: async (id: number) => apiClient.put(`/documents/${id}/activate`)
};
```

**3. WebSocket –¥–ª—è real-time chat**
```typescript
// web-app/src/api/websocket.ts
import io from 'socket.io-client';

export const socket = io(import.meta.env.VITE_WS_URL, {
  auth: {
    token: localStorage.getItem('access_token')
  }
});

socket.on('message', (data) => {
  store.dispatch(addMessage(data));
});
```

#### –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
- `web-app/src/pages/ChatPage.tsx` - —É–±—Ä–∞—Ç—å setTimeout
- `web-app/src/pages/DocumentsPage.tsx` - —Ä–µ–∞–ª—å–Ω—ã–π upload
- `web-app/src/pages/SettingsPage.tsx` - API —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- `web-app/src/api/services/` - —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å—ã (–Ω–æ–≤–∞—è –ø–∞–ø–∫–∞)
- `web-app/src/api/websocket.ts` - WebSocket –∫–ª–∏–µ–Ω—Ç

#### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- ‚úÖ 0 setTimeout –≤ production –∫–æ–¥–µ
- ‚úÖ –í—Å–µ TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —É–¥–∞–ª–µ–Ω—ã
- ‚úÖ –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç end-to-end
- ‚úÖ WebSocket –æ–±–Ω–æ–≤–ª—è–µ—Ç UI –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

### 5Ô∏è‚É£ **–û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö –ò RETRY –õ–û–ì–ò–ö–ê** üõ°Ô∏è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í—ã—Å–æ–∫–∏–π
**–í—Ä–µ–º—è:** 2 –¥–Ω—è
**–†–∏—Å–∫ –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –ü–æ—Ç–µ—Ä—è –∑–∞–ø—Ä–æ—Å–æ–≤, –ø–ª–æ—Ö–æ–π UX

#### –ü—Ä–æ–±–ª–µ–º—ã
- –û—à–∏–±–∫–∏ API –ø—Ä–æ—Å—Ç–æ –ø–∞–¥–∞—é—Ç
- –ù–µ—Ç retry –¥–ª—è Gemini API (–º–æ–≥—É—Ç –±—ã—Ç—å rate limits)
- –ù–µ—Ç fallback –¥–ª—è OpenAI Whisper
- Celery –∑–∞–¥–∞—á–∏ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ–µ

#### –†–µ—à–µ–Ω–∏–µ

**1. Retry –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è AI –∑–∞–ø—Ä–æ—Å–æ–≤**
```python
# utils/retry.py
from tenacity import retry, stop_after_attempt, wait_exponential

@retry(
    stop=stop_after_attempt(3),
    wait=wait_exponential(multiplier=1, min=2, max=10),
    reraise=True
)
async def call_gemini_with_retry(model, prompt):
    return await model.generate_content_async(prompt)
```

**2. Error handling –≤ Celery**
```python
# tasks.py
@app.task(bind=True, max_retries=3, default_retry_delay=60)
def process_pdf_task(self, ...):
    try:
        # processing
    except Exception as exc:
        logger.error(f"PDF processing failed: {exc}")
        raise self.retry(exc=exc, countdown=60)
```

**3. Global error handler –¥–ª—è API**
```python
# api/middleware/error_handler.py
from fastapi import Request, status
from fastapi.responses import JSONResponse

@app.exception_handler(Exception)
async def global_exception_handler(request: Request, exc: Exception):
    logger.error(f"Unhandled error: {exc}", exc_info=True)
    return JSONResponse(
        status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
        content={"detail": "Internal server error", "type": type(exc).__name__}
    )
```

**4. Frontend error boundary**
```typescript
// web-app/src/components/ErrorBoundary.tsx
class ErrorBoundary extends React.Component {
  componentDidCatch(error, errorInfo) {
    logger.error('React error:', error, errorInfo);
    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Sentry
  }

  render() {
    if (this.state.hasError) {
      return <ErrorFallback />;
    }
    return this.props.children;
  }
}
```

#### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- ‚úÖ AI –∑–∞–ø—Ä–æ—Å—ã —Ä–µ—Ç—Ä–∞—è—Ç—Å—è –¥–æ 3 —Ä–∞–∑
- ‚úÖ Celery –∑–∞–¥–∞—á–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è
- ‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

---

### 6Ô∏è‚É£ **–ö–≠–®–ò–†–û–í–ê–ù–ò–ï AI –ó–ê–ü–†–û–°–û–í** üí∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í—ã—Å–æ–∫–∏–π
**–í—Ä–µ–º—è:** 2 –¥–Ω—è
**–†–∏—Å–∫ –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –í—ã—Å–æ–∫–∏–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ API, –º–µ–¥–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

#### –ü—Ä–æ–±–ª–µ–º—ã
- –ö–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å = –Ω–æ–≤—ã–π API –≤—ã–∑–æ–≤ –∫ Gemini ($$$)
- –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ
- Gemini API –º–µ–¥–ª–µ–Ω–Ω—ã–π (2-5 —Å–µ–∫)
- Redis –µ—Å—Ç—å, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫—ç—à–∞

#### –†–µ—à–µ–Ω–∏–µ

**1. Redis cache –¥–ª—è AI –æ—Ç–≤–µ—Ç–æ–≤**
```python
# utils/cache.py
import redis
import hashlib
import json

redis_client = redis.from_url(os.getenv('REDIS_URL'))

def get_cache_key(document_id: int, question: str) -> str:
    content = f"{document_id}:{question}"
    return f"ai_response:{hashlib.md5(content.encode()).hexdigest()}"

def get_cached_response(document_id: int, question: str):
    key = get_cache_key(document_id, question)
    cached = redis_client.get(key)
    if cached:
        return json.loads(cached)
    return None

def cache_response(document_id: int, question: str, response: str, ttl=3600):
    key = get_cache_key(document_id, question)
    redis_client.setex(key, ttl, json.dumps(response))
```

**2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ handlers**
```python
# handlers/messages.py
async def handle_message(update, context, gemini_model):
    question = update.message.text

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—ç—à
    cached = get_cached_response(active_doc.id, question)
    if cached:
        await update.message.reply_text(f"‚ö° {cached}\n\n_[Cached response]_")
        return

    # –í—ã–∑—ã–≤–∞–µ–º AI
    response = await call_gemini_with_retry(gemini_model, prompt)

    # –ö—ç—à–∏—Ä—É–µ–º –Ω–∞ 1 —á–∞—Å
    cache_response(active_doc.id, question, response, ttl=3600)
    await update.message.reply_text(response)
```

**3. Cache invalidation –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞**
```python
def invalidate_document_cache(document_id: int):
    pattern = f"ai_response:*{document_id}:*"
    for key in redis_client.scan_iter(match=pattern):
        redis_client.delete(key)
```

#### –≠–∫–æ–Ω–æ–º–∏—è
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ API –≤—ã–∑–æ–≤–æ–≤ –Ω–∞ 40-60%
- –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ $50-200/–º–µ—Å—è—Ü
- –û—Ç–≤–µ—Ç—ã –≤ 10-20 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ (–∏–∑ –∫—ç—à–∞)

#### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- ‚úÖ Cache hit rate > 40%
- ‚úÖ –°—Ä–µ–¥–Ω—è—è latency < 500ms
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ API costs –Ω–∞ 50%

---

### 7Ô∏è‚É£ **–ú–ò–ì–†–ê–¶–ò–ò –ë–î –° ALEMBIC** üîÑ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í—ã—Å–æ–∫–∏–π
**–í—Ä–µ–º—è:** 1 –¥–µ–Ω—å
**–†–∏—Å–∫ –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, –ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö

#### –ü—Ä–æ–±–ª–µ–º—ã
- –ú–∏–≥—Ä–∞—Ü–∏–∏ = —Ä—É—á–Ω—ã–µ SQL —Å–∫—Ä–∏–ø—Ç—ã (migrate_db.py)
- –ù–µ—Ç –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ö–µ–º—ã –ë–î
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- Team collaboration –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–∞

#### –†–µ—à–µ–Ω–∏–µ

**1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Alembic**
```bash
pip install alembic
alembic init alembic
```

**2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
```python
# alembic/env.py
from database.models import Base
target_metadata = Base.metadata

def run_migrations_online():
    connectable = engine_from_config(
        config.get_section(config.config_ini_section),
        prefix="sqlalchemy.",
        poolclass=pool.NullPool,
    )
    # ...
```

**3. –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π**
```bash
# –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑ –º–æ–¥–µ–ª–µ–π
alembic revision --autogenerate -m "Add Question and Rating models"

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
alembic upgrade head

# –û—Ç–∫–∞—Ç
alembic downgrade -1
```

**4. CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
```yaml
# .github/workflows/deploy.yml
- name: Run migrations
  run: alembic upgrade head
```

#### –§–∞–π–ª—ã
- `alembic/` - –ø–∞–ø–∫–∞ —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- `alembic.ini` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `alembic/env.py` - setup
- `alembic/versions/` - —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π

#### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î —á–µ—Ä–µ–∑ Alembic
- ‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –ª—é–±—É—é –º–∏–≥—Ä–∞—Ü–∏—é
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ git

---

### 8Ô∏è‚É£ **–ê–ù–ê–õ–ò–¢–ò–ö–ê –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì** üìà
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –°—Ä–µ–¥–Ω–∏–π
**–í—Ä–µ–º—è:** 2 –¥–Ω—è
**–†–∏—Å–∫ –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –ù–µ –≤–∏–¥–∏–º –ø—Ä–æ–±–ª–µ–º, –Ω–µ –ø–æ–Ω–∏–º–∞–µ–º usage

#### –ü—Ä–æ–±–ª–µ–º—ã
- –ù–µ—Ç –º–µ—Ç—Ä–∏–∫ (RPS, latency, errors)
- –ù–µ—Ç health checks
- –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ structured —Ñ–æ—Ä–º–∞—Ç–µ
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ debugging production issues

#### –†–µ—à–µ–Ω–∏–µ

**1. Structured logging**
```python
# utils/logger.py
import structlog

logger = structlog.get_logger()

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
logger.info("document_processed",
    user_id=user.id,
    doc_id=doc.id,
    duration_ms=elapsed
)
```

**2. Health checks**
```python
# api/routes/health.py
@router.get("/health")
async def health_check():
    checks = {
        "database": await check_db(),
        "redis": await check_redis(),
        "celery": await check_celery()
    }
    status = "healthy" if all(checks.values()) else "unhealthy"
    return {"status": status, "checks": checks}
```

**3. Prometheus metrics**
```python
# api/middleware/metrics.py
from prometheus_client import Counter, Histogram

request_count = Counter('http_requests_total', 'Total requests')
request_duration = Histogram('http_request_duration_seconds', 'Request duration')

@app.middleware("http")
async def metrics_middleware(request, call_next):
    request_count.inc()
    with request_duration.time():
        response = await call_next(request)
    return response
```

**4. Error tracking (Sentry)**
```python
import sentry_sdk

sentry_sdk.init(
    dsn=os.getenv("SENTRY_DSN"),
    traces_sample_rate=0.1
)
```

#### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- ‚úÖ Health endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å
- ‚úÖ –í—Å–µ –æ—à–∏–±–∫–∏ –≤ Sentry
- ‚úÖ Structured logs –≤ JSON
- ‚úÖ Prometheus metrics exported

---

### 9Ô∏è‚É£ **RATE LIMITING –ò QUOTA** ‚è±Ô∏è
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –°—Ä–µ–¥–Ω–∏–π
**–í—Ä–µ–º—è:** 1 –¥–µ–Ω—å
**–†–∏—Å–∫ –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –°–ø–∞–º, –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è, –≤—ã—Å–æ–∫–∏–µ costs

#### –ü—Ä–æ–±–ª–µ–º—ã
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å 1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
- –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ file uploads
- –ë–æ—Ç –º–æ–∂–Ω–æ –∑–∞—Å–ø–∞–º–∏—Ç—å
- –ù–µ—Ç premium/free tier limits

#### –†–µ—à–µ–Ω–∏–µ

**1. Redis-based rate limiter**
```python
# middleware/rate_limiter.py
from datetime import datetime, timedelta

def check_rate_limit(user_id: int, action: str, limit: int, window: int = 60):
    key = f"rate_limit:{user_id}:{action}"
    current = redis_client.incr(key)

    if current == 1:
        redis_client.expire(key, window)

    if current > limit:
        raise RateLimitExceeded(f"Limit: {limit} requests per {window}s")

    return True
```

**2. Telegram bot rate limiting**
```python
# handlers/messages.py
@check_rate_limit(limit=5, window=60)  # 5 AI –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
async def handle_message(update, context, gemini_model):
    # ...
```

**3. API rate limiting**
```python
from slowapi import Limiter, _rate_limit_exceeded_handler
from slowapi.util import get_remote_address

limiter = Limiter(key_func=get_remote_address)
app.state.limiter = limiter

@app.get("/api/chat/message")
@limiter.limit("10/minute")
async def send_message(request: Request):
    # ...
```

**4. Premium tier quotas**
```python
QUOTAS = {
    "free": {
        "ai_requests_per_day": 50,
        "uploads_per_day": 10,
        "max_file_size_mb": 10
    },
    "premium": {
        "ai_requests_per_day": 1000,
        "uploads_per_day": 100,
        "max_file_size_mb": 50
    }
}
```

#### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- ‚úÖ Rate limits –Ω–∞ –≤—Å–µ—Ö endpoints
- ‚úÖ Premium users –∏–º–µ—é—Ç higher limits
- ‚úÖ Abuse prevention —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### üîü **CI/CD –ò –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–Ø** ü§ñ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –°—Ä–µ–¥–Ω–∏–π
**–í—Ä–µ–º—è:** 2 –¥–Ω—è
**–†–∏—Å–∫ –±–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π, –º–µ–¥–ª–µ–Ω–Ω—ã–µ releases

#### –ü—Ä–æ–±–ª–µ–º—ã
- –î–µ–ø–ª–æ–π = —Ä—É—á–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤ –ø–µ—Ä–µ–¥ merge
- –ù–µ—Ç staging –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ù–µ—Ç rollback –º–µ—Ö–∞–Ω–∏–∑–º–∞

#### –†–µ—à–µ–Ω–∏–µ

**1. GitHub Actions workflow**
```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      - name: Install dependencies
        run: |
          pip install -r requirements.txt
          pip install pytest pytest-cov

      - name: Run tests
        run: pytest --cov=. --cov-report=xml

      - name: Upload coverage
        uses: codecov/codecov-action@v3

  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Run linters
        run: |
          pip install black flake8 mypy
          black --check .
          flake8 .
          mypy .

  deploy:
    needs: [test, lint]
    if: github.ref == 'refs/heads/main'
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to production
        run: |
          # Docker deploy –∏–ª–∏ SSH deploy
```

**2. Docker Compose –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤**
```yaml
# docker-compose.prod.yml
version: '3.8'
services:
  bot:
    build: .
    environment:
      - ENV=production
    depends_on:
      - db
      - redis

  api:
    build:
      context: .
      dockerfile: Dockerfile.api
    ports:
      - "8000:8000"

  worker:
    build:
      context: .
      dockerfile: Dockerfile.worker

  db:
    image: postgres:16
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
```

**3. Pre-commit hooks**
```yaml
# .pre-commit-config.yaml
repos:
  - repo: https://github.com/psf/black
    rev: 23.3.0
    hooks:
      - id: black

  - repo: https://github.com/pycqa/flake8
    rev: 6.0.0
    hooks:
      - id: flake8

  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.4.0
    hooks:
      - id: check-yaml
      - id: end-of-file-fixer
      - id: trailing-whitespace
```

#### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –Ω–∞ main push
- ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –ø–µ—Ä–µ–¥ merge
- ‚úÖ Linters enforced
- ‚úÖ Docker –æ–±—Ä–∞–∑—ã –≤ registry

---

## üìã –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –ù–µ–¥–µ–ª—è 1: –§—É–Ω–¥–∞–º–µ–Ω—Ç (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ 1-3)
**–î–Ω–∏ 1-3:** –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- Day 1: Security utils, validators
- Day 2: Rate limiting, file validation
- Day 3: API security, CORS, CSP

**–î–Ω–∏ 4-8:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- Day 4-5: Unit tests (models, crud, tasks)
- Day 6-7: Integration tests (handlers, API)
- Day 8: Fixtures, coverage report

### –ù–µ–¥–µ–ª—è 2: API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ 4-5)
**–î–Ω–∏ 9-12:** REST API
- Day 9: FastAPI setup, auth endpoints
- Day 10: Documents, chat endpoints
- Day 11: Analytics, settings endpoints
- Day 12: WebSocket, developer tools

**–î–Ω–∏ 13-14:** –í–µ–±-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- Day 13: Services, —É–±—Ä–∞—Ç—å setTimeout
- Day 14: WebSocket client, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–µ–¥–µ–ª—è 3: –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å (–£–ª—É—á—à–µ–Ω–∏—è 6-8)
**–î–Ω–∏ 15-16:** Error handling & retry
- Day 15: Retry –ª–æ–≥–∏–∫–∞, error handlers
- Day 16: Frontend error boundary

**–î–Ω–∏ 17-18:** –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Day 17: Redis cache, invalidation
- Day 18: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç—Ñ—Ñ–µ–∫—Ç–∞

**–î–µ–Ω—å 19:** –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic
- Setup, –ø–µ—Ä–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ù–µ–¥–µ–ª—è 4: Production-ready (–£–ª—É—á—à–µ–Ω–∏—è 9-10)
**–î–Ω–∏ 20-21:** –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- Day 20: Structured logging, health checks
- Day 21: Prometheus metrics, Sentry

**–î–µ–Ω—å 22:** Rate limiting
- –ö–≤–æ—Ç—ã, premium tiers, abuse prevention

**–î–Ω–∏ 23-24:** CI/CD
- Day 23: GitHub Actions, Docker
- Day 24: –î–µ–ø–ª–æ–π, rollback testing

---

## üéØ –ú–ï–¢–†–ò–ö–ò –£–°–ü–ï–•–ê –ü–†–û–ï–ö–¢–ê

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö —É–ª—É—á—à–µ–Ω–∏–π:

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
- ‚úÖ Test coverage > 70%
- ‚úÖ 0 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö security —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –í—Å–µ linters –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ TypeScript strict mode = true

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ API response time < 200ms (–±–µ–∑ AI)
- ‚úÖ Cache hit rate > 40%
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ API costs –Ω–∞ 50%
- ‚úÖ 99% uptime

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ Rate limiting –Ω–∞ –≤—Å–µ—Ö endpoints
- ‚úÖ Input validation 100%
- ‚úÖ Security headers –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ Secrets –Ω–µ –≤ –∫–æ–¥–µ/–ª–æ–≥–∞—Ö

### DevOps
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –¢–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º merge
- ‚úÖ Rollback –∑–∞ < 5 –º–∏–Ω—É—Ç
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ alerts –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

## üí∞ –û–¶–ï–ù–ö–ê –†–ï–°–£–†–°–û–í

### –í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **–ù–µ–¥–µ–ª—è 1:** 5 –¥–Ω–µ–π (—Ñ—É–Ω–¥–∞–º–µ–Ω—Ç)
- **–ù–µ–¥–µ–ª—è 2:** 5 –¥–Ω–µ–π (API)
- **–ù–µ–¥–µ–ª—è 3:** 4 –¥–Ω—è (–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å)
- **–ù–µ–¥–µ–ª—è 4:** 4 –¥–Ω—è (production)
- **–ò–¢–û–ì–û:** ~18 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π (3.5 –Ω–µ–¥–µ–ª–∏)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
# Security
pip install pydantic python-multipart python-jose passlib

# Testing
pip install pytest pytest-cov pytest-asyncio pytest-mock faker

# API
pip install fastapi uvicorn slowapi

# Monitoring
pip install structlog prometheus-client sentry-sdk

# DB
pip install alembic

# Retry
pip install tenacity
```

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ costs (–º–µ—Å—è—Ü)
- **DigitalOcean/AWS:** $20-50
- **Gemini API:** $50-200 (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç usage)
- **Sentry:** Free tier
- **Total:** $70-250/–º–µ—Å—è—Ü

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î PRODUCTION

- [ ] –í—Å–µ 10 —É–ª—É—á—à–µ–Ω–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- [ ] Tests coverage > 70%
- [ ] Security audit –ø—Ä–æ–π–¥–µ–Ω
- [ ] Load testing –≤—ã–ø–æ–ª–Ω–µ–Ω (100+ concurrent users)
- [ ] Backup/restore –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] Monitoring –∏ alerts –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] Documentation –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] .env.example –∞–∫—Ç—É–∞–ª–µ–Ω
- [ ] Docker images —Å–æ–±–∏—Ä–∞—é—Ç—Å—è
- [ ] CI/CD pipeline —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Staging –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ production
- [ ] Rollback –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞

---

**–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é?** üöÄ

–ü—Ä–µ–¥–ª–∞–≥–∞—é –Ω–∞—á–∞—Ç—å —Å **#1 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** –∫–∞–∫ —Å–∞–º–æ–≥–æ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ –¥–ª—è production.
